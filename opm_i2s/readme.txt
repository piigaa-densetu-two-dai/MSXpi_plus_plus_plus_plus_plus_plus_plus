ヤマハOPM音源のファームウェアです。
I2S出力版なので別途、PCM5102等のI2S対応DACモジュールが必用です。
ヤマハSFG-01のものと同じ識別子を埋め込んであるので「一部の」SFG-01対応のソフトウェアが動作します。
ヤマハ純正のSFG-01対応ソフトウェアは一切動作しません。
VGMPlay(https://www.grauw.nl/projects/vgmplay-msx/)でOPMサウンドが再生出来ます。

音声データの生成にymfm(great!)を使用しています。
https://github.com/aaronsgiles/ymfm

結線方法

MSXπ側  DACモジュール側
VCC     VIN
GND     GND
IO32    LRCK
IO34    DIN
IO33    BCK
IO35    SCK(不必要な配線なので繋がなくても構いません)

音声フォーマットは16ビット、ステレオ2CH、サンプルレート55930Hzです。

ヤマハSFG-01との違い

1. 専用BIOSが入っていない(但し識別子は埋め込み済)
2. MIDIインターフェースが無い
3. タイマー/割り込みに対応していない
4. wait無しで動作する

使用法

1. MSXに刺さっていない状態のMSXπ✨✨✨✨✨✨✨をブートモードでPCに接続します。

MSXπ✨✨✨✨✨✨✨のBOOTSELボタンを押しながらPCとUSB接続して下さい。
接続が成功するとドライブが認識されます。

2. MSXπ✨✨✨✨✨✨✨にopm.uf2を書き込みします。

1で認識されたドライブにopm.uf2をドラッグアンドドロップ(コピー)します。
コピーが完了するとドライブが見えなくなります。

3. 書込みが終わったらPCから外して完了

メモリマップドIOポート仕様

0x3ff0 (write) アドレス書込み
0x3ff1 (write) データ書き込み
0x3ff1 (read) ステータス読み込み(常に0x00を返す)

SFG-01デバイス識別子

0x0080: 4d43 4846 4d30 0300 0300 0000 0000 0000  MCHFM0..........




